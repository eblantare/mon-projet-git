<div class="login-background">
 <div class="login-container">
    <form [formGroup]="form" (ngSubmit)="onSubmit()" (keydown.enter)="onSubmit()">
        <mat-card>
            <mat-card-header>
               <mat-card-title>Connexion</mat-card-title>
               <mat-card-subtitle>{{currentTime}}</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
  <mat-form-field appearance="outline">
    <input matInput placeholder="Nom d'utilisateur" formControlName="username" type="text" required />
    <mat-error *ngIf="form.get('username')?.invalid && form.get('username') ?.touched">
      Nom d'utilisateur requis
    </mat-error>
  </mat-form-field>

  <!-- Champ mot de passe avec visibilité toggle -->
  <mat-form-field appearance="outline" class="custom-password-field">
    <input matInput [type]="hide ? 'password' : 'text'" placeholder="Mot de passe"
      formControlName="password" required />
    <button type="button" mat-icon-button matSuffix (click)="hide=!hide"
      [attr.aria-label]="'Afficher ou masquer le mot de passe'"
      [attr.aria-pressed]="!hide">
      <mat-icon>{{ hide ? 'visibility_off' : 'visibility' }}</mat-icon>
    </button>
    <mat-hint *ngIf="passwordTouchedAndInvalid()" style="color: red;">
      Le mot de passe doit contenir au moins 8 caractères, une majuscule, un chiffre et un caractère spécial.
    </mat-hint>
  </mat-form-field>
<mat-checkbox formControlName="rememberMe">Se souvenir de moi</mat-checkbox>
<div class="forgot-link">
 <a router-link="/forgot-password">Mot de passe oublié</a>
    </div>
    <div *ngIf="error" class="error">{{error}}</div>
    </mat-card-content>
    <mat-card-actions align="end">
    <button mat-raised-button color="primary" type="submit"
    [disabled]="!canSubmit()" class="login-button">Se connecter</button>
    </mat-card-actions>
</mat-card>

</form>
</div>
</div>
